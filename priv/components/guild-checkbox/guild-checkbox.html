<link rel="import" href="../paper-checkbox/paper-checkbox.html">

<dom-module id="guild-checkbox">
  <template>
    <paper-checkbox
        id="cb"
        checked="{{checked}}"
        disabled="{{disabled}}"
        on-change="checkedChanged"
    ><content></content></paper-checkbox>
  </template>
  <script>
   Polymer({
       is: "guild-checkbox",

       properties: {
           checked: {
               type: Boolean,
               readOnly: true,
               notify: true
           },
           ariaChecked: {
               type: String,
               observer: 'ariaCheckedChanged',
               notify: true
           },
           disabled: Boolean
       },

       attached: function() {
           this.refreshMixedStyle();
       },

       checkedChanged: function() {
           var checked = this.$.cb.checked;
           this._setChecked(checked);
           if (checked) {
               this.ariaChecked = "true";
           } else {
               this.ariaChecked = "false";
           }
       },

       ariaCheckedChanged: function(val, old) {
           if (val == "true") {
               this._setChecked(true);
           } else {
               this._setChecked(false);
           }
           if ((val == "mixed" && old != undefined) || old == "mixed") {
               this.refreshMixedStyle();
           }
       },

       refreshMixedStyle: function() {
           var bg = this.ariaChecked == "mixed" ? "#ccc": "transparent";
           this.customStyle["--paper-checkbox-unchecked-background-color"] = bg;
           this.updateStyles();
       }
   });
  </script>
</dom-module>
