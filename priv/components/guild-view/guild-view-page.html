<link rel="import" href="../guild-styles/guild-styles.html">

<script src="viewpage.js"></script>

<dom-module id="guild-view-page">
  <template>
    <style include="guild-spacing-styles"></style>
    <style include="guild-view-row-styles"></style>
    <style>
     .component-wrapper {
         margin-bottom: 20px;
     }
    </style>
  </template>

  <script>
   Polymer({
       is: 'guild-view-page',

       properties: {
           page: Object,
           env: Object,
           generated: {
               type: Boolean,
               value: false
           }
       },

       ensureGenerated: function() {
           if (!this.generated) {
               if (this.page.layout) {
                   Guild.ViewPage.generate(
                       this.root,
                       this.page.layout,
                       this.initGenerateState());
               }
               this.generated = true;
           }
       },

       initGenerateState: function() {
           return {
               env: this.env,
               page: this
           };
       },

       selected: function(val) {
           Guild.ViewPage.components(this).forEach(function(c) {
               c.active = val;
           });
       }
   });
  </script>
</dom-module>
